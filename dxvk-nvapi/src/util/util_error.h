#pragma once

#include "../nvapi_private.h"

namespace dxvk {
    inline std::string fromErrorNr(const int16_t errorNr) {
        static const std::map<int16_t, std::string> errors{
            MAP_ENUM_VALUE(NVAPI_ERROR),
            MAP_ENUM_VALUE(NVAPI_LIBRARY_NOT_FOUND),
            MAP_ENUM_VALUE(NVAPI_NO_IMPLEMENTATION),
            MAP_ENUM_VALUE(NVAPI_API_NOT_INITIALIZED),
            MAP_ENUM_VALUE(NVAPI_INVALID_ARGUMENT),
            MAP_ENUM_VALUE(NVAPI_NVIDIA_DEVICE_NOT_FOUND),
            MAP_ENUM_VALUE(NVAPI_END_ENUMERATION),
            MAP_ENUM_VALUE(NVAPI_INVALID_HANDLE),
            MAP_ENUM_VALUE(NVAPI_INCOMPATIBLE_STRUCT_VERSION),
            MAP_ENUM_VALUE(NVAPI_HANDLE_INVALIDATED),
            MAP_ENUM_VALUE(NVAPI_OPENGL_CONTEXT_NOT_CURRENT),
            MAP_ENUM_VALUE(NVAPI_INVALID_POINTER),
            MAP_ENUM_VALUE(NVAPI_NO_GL_EXPERT),
            MAP_ENUM_VALUE(NVAPI_INSTRUMENTATION_DISABLED),
            MAP_ENUM_VALUE(NVAPI_NO_GL_NSIGHT),
            MAP_ENUM_VALUE(NVAPI_EXPECTED_LOGICAL_GPU_HANDLE),
            MAP_ENUM_VALUE(NVAPI_EXPECTED_PHYSICAL_GPU_HANDLE),
            MAP_ENUM_VALUE(NVAPI_EXPECTED_DISPLAY_HANDLE),
            MAP_ENUM_VALUE(NVAPI_INVALID_COMBINATION),
            MAP_ENUM_VALUE(NVAPI_NOT_SUPPORTED),
            MAP_ENUM_VALUE(NVAPI_PORTID_NOT_FOUND),
            MAP_ENUM_VALUE(NVAPI_EXPECTED_UNATTACHED_DISPLAY_HANDLE),
            MAP_ENUM_VALUE(NVAPI_INVALID_PERF_LEVEL),
            MAP_ENUM_VALUE(NVAPI_DEVICE_BUSY),
            MAP_ENUM_VALUE(NVAPI_NV_PERSIST_FILE_NOT_FOUND),
            MAP_ENUM_VALUE(NVAPI_PERSIST_DATA_NOT_FOUND),
            MAP_ENUM_VALUE(NVAPI_EXPECTED_TV_DISPLAY),
            MAP_ENUM_VALUE(NVAPI_EXPECTED_TV_DISPLAY_ON_DCONNECTOR),
            MAP_ENUM_VALUE(NVAPI_NO_ACTIVE_SLI_TOPOLOGY),
            MAP_ENUM_VALUE(NVAPI_SLI_RENDERING_MODE_NOTALLOWED),
            MAP_ENUM_VALUE(NVAPI_EXPECTED_DIGITAL_FLAT_PANEL),
            MAP_ENUM_VALUE(NVAPI_ARGUMENT_EXCEED_MAX_SIZE),
            MAP_ENUM_VALUE(NVAPI_DEVICE_SWITCHING_NOT_ALLOWED),
            MAP_ENUM_VALUE(NVAPI_TESTING_CLOCKS_NOT_SUPPORTED),
            MAP_ENUM_VALUE(NVAPI_UNKNOWN_UNDERSCAN_CONFIG),
            MAP_ENUM_VALUE(NVAPI_TIMEOUT_RECONFIGURING_GPU_TOPO),
            MAP_ENUM_VALUE(NVAPI_DATA_NOT_FOUND),
            MAP_ENUM_VALUE(NVAPI_EXPECTED_ANALOG_DISPLAY),
            MAP_ENUM_VALUE(NVAPI_NO_VIDLINK),
            MAP_ENUM_VALUE(NVAPI_REQUIRES_REBOOT),
            MAP_ENUM_VALUE(NVAPI_INVALID_HYBRID_MODE),
            MAP_ENUM_VALUE(NVAPI_MIXED_TARGET_TYPES),
            MAP_ENUM_VALUE(NVAPI_SYSWOW64_NOT_SUPPORTED),
            MAP_ENUM_VALUE(NVAPI_IMPLICIT_SET_GPU_TOPOLOGY_CHANGE_NOT_ALLOWED),
            MAP_ENUM_VALUE(NVAPI_REQUEST_USER_TO_CLOSE_NON_MIGRATABLE_APPS),
            MAP_ENUM_VALUE(NVAPI_OUT_OF_MEMORY),
            MAP_ENUM_VALUE(NVAPI_WAS_STILL_DRAWING),
            MAP_ENUM_VALUE(NVAPI_FILE_NOT_FOUND),
            MAP_ENUM_VALUE(NVAPI_TOO_MANY_UNIQUE_STATE_OBJECTS),
            MAP_ENUM_VALUE(NVAPI_INVALID_CALL),
            MAP_ENUM_VALUE(NVAPI_D3D10_1_LIBRARY_NOT_FOUND),
            MAP_ENUM_VALUE(NVAPI_FUNCTION_NOT_FOUND),
            MAP_ENUM_VALUE(NVAPI_INVALID_USER_PRIVILEGE),
            MAP_ENUM_VALUE(NVAPI_EXPECTED_NON_PRIMARY_DISPLAY_HANDLE),
            MAP_ENUM_VALUE(NVAPI_EXPECTED_COMPUTE_GPU_HANDLE),
            MAP_ENUM_VALUE(NVAPI_STEREO_NOT_INITIALIZED),
            MAP_ENUM_VALUE(NVAPI_STEREO_REGISTRY_ACCESS_FAILED),
            MAP_ENUM_VALUE(NVAPI_STEREO_REGISTRY_PROFILE_TYPE_NOT_SUPPORTED),
            MAP_ENUM_VALUE(NVAPI_STEREO_REGISTRY_VALUE_NOT_SUPPORTED),
            MAP_ENUM_VALUE(NVAPI_STEREO_NOT_ENABLED),
            MAP_ENUM_VALUE(NVAPI_STEREO_NOT_TURNED_ON),
            MAP_ENUM_VALUE(NVAPI_STEREO_INVALID_DEVICE_INTERFACE),
            MAP_ENUM_VALUE(NVAPI_STEREO_PARAMETER_OUT_OF_RANGE),
            MAP_ENUM_VALUE(NVAPI_STEREO_FRUSTUM_ADJUST_MODE_NOT_SUPPORTED),
            MAP_ENUM_VALUE(NVAPI_TOPO_NOT_POSSIBLE),
            MAP_ENUM_VALUE(NVAPI_MODE_CHANGE_FAILED),
            MAP_ENUM_VALUE(NVAPI_D3D11_LIBRARY_NOT_FOUND),
            MAP_ENUM_VALUE(NVAPI_INVALID_ADDRESS),
            MAP_ENUM_VALUE(NVAPI_STRING_TOO_SMALL),
            MAP_ENUM_VALUE(NVAPI_MATCHING_DEVICE_NOT_FOUND),
            MAP_ENUM_VALUE(NVAPI_DRIVER_RUNNING),
            MAP_ENUM_VALUE(NVAPI_DRIVER_NOTRUNNING),
            MAP_ENUM_VALUE(NVAPI_ERROR_DRIVER_RELOAD_REQUIRED),
            MAP_ENUM_VALUE(NVAPI_SET_NOT_ALLOWED),
            MAP_ENUM_VALUE(NVAPI_ADVANCED_DISPLAY_TOPOLOGY_REQUIRED),
            MAP_ENUM_VALUE(NVAPI_SETTING_NOT_FOUND),
            MAP_ENUM_VALUE(NVAPI_SETTING_SIZE_TOO_LARGE),
            MAP_ENUM_VALUE(NVAPI_TOO_MANY_SETTINGS_IN_PROFILE),
            MAP_ENUM_VALUE(NVAPI_PROFILE_NOT_FOUND),
            MAP_ENUM_VALUE(NVAPI_PROFILE_NAME_IN_USE),
            MAP_ENUM_VALUE(NVAPI_PROFILE_NAME_EMPTY),
            MAP_ENUM_VALUE(NVAPI_EXECUTABLE_NOT_FOUND),
            MAP_ENUM_VALUE(NVAPI_EXECUTABLE_ALREADY_IN_USE),
            MAP_ENUM_VALUE(NVAPI_DATATYPE_MISMATCH),
            MAP_ENUM_VALUE(NVAPI_PROFILE_REMOVED),
            MAP_ENUM_VALUE(NVAPI_UNREGISTERED_RESOURCE),
            MAP_ENUM_VALUE(NVAPI_ID_OUT_OF_RANGE),
            MAP_ENUM_VALUE(NVAPI_DISPLAYCONFIG_VALIDATION_FAILED),
            MAP_ENUM_VALUE(NVAPI_DPMST_CHANGED),
            MAP_ENUM_VALUE(NVAPI_INSUFFICIENT_BUFFER),
            MAP_ENUM_VALUE(NVAPI_ACCESS_DENIED),
            MAP_ENUM_VALUE(NVAPI_MOSAIC_NOT_ACTIVE),
            MAP_ENUM_VALUE(NVAPI_SHARE_RESOURCE_RELOCATED),
            MAP_ENUM_VALUE(NVAPI_REQUEST_USER_TO_DISABLE_DWM),
            MAP_ENUM_VALUE(NVAPI_D3D_DEVICE_LOST),
            MAP_ENUM_VALUE(NVAPI_INVALID_CONFIGURATION),
            MAP_ENUM_VALUE(NVAPI_STEREO_HANDSHAKE_NOT_DONE),
            MAP_ENUM_VALUE(NVAPI_EXECUTABLE_PATH_IS_AMBIGUOUS),
            MAP_ENUM_VALUE(NVAPI_DEFAULT_STEREO_PROFILE_IS_NOT_DEFINED),
            MAP_ENUM_VALUE(NVAPI_DEFAULT_STEREO_PROFILE_DOES_NOT_EXIST),
            MAP_ENUM_VALUE(NVAPI_CLUSTER_ALREADY_EXISTS),
            MAP_ENUM_VALUE(NVAPI_DPMST_DISPLAY_ID_EXPECTED),
            MAP_ENUM_VALUE(NVAPI_INVALID_DISPLAY_ID),
            MAP_ENUM_VALUE(NVAPI_STREAM_IS_OUT_OF_SYNC),
            MAP_ENUM_VALUE(NVAPI_INCOMPATIBLE_AUDIO_DRIVER),
            MAP_ENUM_VALUE(NVAPI_VALUE_ALREADY_SET),
            MAP_ENUM_VALUE(NVAPI_TIMEOUT),
            MAP_ENUM_VALUE(NVAPI_GPU_WORKSTATION_FEATURE_INCOMPLETE),
            MAP_ENUM_VALUE(NVAPI_STEREO_INIT_ACTIVATION_NOT_DONE),
            MAP_ENUM_VALUE(NVAPI_SYNC_NOT_ACTIVE),
            MAP_ENUM_VALUE(NVAPI_SYNC_MASTER_NOT_FOUND),
            MAP_ENUM_VALUE(NVAPI_INVALID_SYNC_TOPOLOGY),
            MAP_ENUM_VALUE(NVAPI_ECID_SIGN_ALGO_UNSUPPORTED),
            MAP_ENUM_VALUE(NVAPI_ECID_KEY_VERIFICATION_FAILED),
            MAP_ENUM_VALUE(NVAPI_FIRMWARE_OUT_OF_DATE),
            MAP_ENUM_VALUE(NVAPI_FIRMWARE_REVISION_NOT_SUPPORTED),
            MAP_ENUM_VALUE(NVAPI_LICENSE_CALLER_AUTHENTICATION_FAILED),
            MAP_ENUM_VALUE(NVAPI_D3D_DEVICE_NOT_REGISTERED),
            MAP_ENUM_VALUE(NVAPI_RESOURCE_NOT_ACQUIRED),
            MAP_ENUM_VALUE(NVAPI_TIMING_NOT_SUPPORTED),
            MAP_ENUM_VALUE(NVAPI_HDCP_ENCRYPTION_FAILED),
            MAP_ENUM_VALUE(NVAPI_PCLK_LIMITATION_FAILED),
            MAP_ENUM_VALUE(NVAPI_NO_CONNECTOR_FOUND),
            MAP_ENUM_VALUE(NVAPI_HDCP_DISABLED),
            MAP_ENUM_VALUE(NVAPI_API_IN_USE),
            MAP_ENUM_VALUE(NVAPI_NVIDIA_DISPLAY_NOT_FOUND),
            MAP_ENUM_VALUE(NVAPI_PRIV_SEC_VIOLATION),
            MAP_ENUM_VALUE(NVAPI_INCORRECT_VENDOR),
            MAP_ENUM_VALUE(NVAPI_DISPLAY_IN_USE),
            MAP_ENUM_VALUE(NVAPI_UNSUPPORTED_CONFIG_NON_HDCP_HMD),
            MAP_ENUM_VALUE(NVAPI_MAX_DISPLAY_LIMIT_REACHED),
            MAP_ENUM_VALUE(NVAPI_INVALID_DIRECT_MODE_DISPLAY),
            MAP_ENUM_VALUE(NVAPI_GPU_IN_DEBUG_MODE),
            MAP_ENUM_VALUE(NVAPI_D3D_CONTEXT_NOT_FOUND),
            MAP_ENUM_VALUE(NVAPI_STEREO_VERSION_MISMATCH),
            MAP_ENUM_VALUE(NVAPI_GPU_NOT_POWERED),
            MAP_ENUM_VALUE(NVAPI_ERROR_DRIVER_RELOAD_IN_PROGRESS),
            MAP_ENUM_VALUE(NVAPI_WAIT_FOR_HW_RESOURCE),
            MAP_ENUM_VALUE(NVAPI_REQUIRE_FURTHER_HDCP_ACTION),
            MAP_ENUM_VALUE(NVAPI_DISPLAY_MUX_TRANSITION_FAILED),
            MAP_ENUM_VALUE(NVAPI_INVALID_DSC_VERSION),
            MAP_ENUM_VALUE(NVAPI_INVALID_DSC_SLICECOUNT),
            MAP_ENUM_VALUE(NVAPI_INVALID_DSC_OUTPUT_BPP),
            MAP_ENUM_VALUE(NVAPI_FAILED_TO_LOAD_FROM_DRIVER_STORE),
            MAP_ENUM_VALUE(NVAPI_NO_VULKAN),
            MAP_ENUM_VALUE(NVAPI_REQUEST_PENDING),
            MAP_ENUM_VALUE(NVAPI_RESOURCE_IN_USE),
            MAP_ENUM_VALUE(NVAPI_INVALID_IMAGE),
            MAP_ENUM_VALUE(NVAPI_INVALID_PTX),
            MAP_ENUM_VALUE(NVAPI_NVLINK_UNCORRECTABLE),
            MAP_ENUM_VALUE(NVAPI_JIT_COMPILER_NOT_FOUND),
            MAP_ENUM_VALUE(NVAPI_INVALID_SOURCE),
            MAP_ENUM_VALUE(NVAPI_ILLEGAL_INSTRUCTION),
            MAP_ENUM_VALUE(NVAPI_INVALID_PC),
            MAP_ENUM_VALUE(NVAPI_LAUNCH_FAILED),
            MAP_ENUM_VALUE(NVAPI_NOT_PERMITTED),
            MAP_ENUM_VALUE(NVAPI_CALLBACK_ALREADY_REGISTERED),
            MAP_ENUM_VALUE(NVAPI_CALLBACK_NOT_FOUND),
            MAP_ENUM_VALUE(NVAPI_INVALID_OUTPUT_WIRE_FORMAT),
        };

        auto it = errors.find(errorNr);
        return it != errors.end() ? it->second : "UNKNOWN_ERROR";
    }
}
